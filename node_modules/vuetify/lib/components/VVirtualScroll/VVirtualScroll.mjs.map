{"version":3,"file":"VVirtualScroll.mjs","names":["Measurable","Scroll","convertToUnit","getSlot","extend","name","directives","props","bench","type","Number","String","default","itemHeight","required","items","Array","data","first","last","scrollTop","computed","__bench","parseInt","__itemHeight","firstToRender","Math","max","lastToRender","min","length","watch","height","mounted","getLast","methods","getChildren","slice","map","genChild","item","index","top","$createElement","staticClass","style","key","getFirst","floor","$el","clientHeight","ceil","onScroll","render","h","content","measurableStyles","modifiers","self","value","on","$listeners"],"sources":["../../../src/components/VVirtualScroll/VVirtualScroll.ts"],"sourcesContent":["// @ts-nocheck\n/* eslint-disable */\n\n// Styles\nimport './VVirtualScroll.sass'\n\n// Mixins\nimport Measurable from '../../mixins/measurable'\n\n// Directives\nimport Scroll from '../../directives/scroll'\n\n// Utilities\nimport {\n  convertToUnit,\n  getSlot,\n} from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\n\nexport default Measurable.extend({\n  name: 'v-virtual-scroll',\n\n  directives: { Scroll },\n\n  props: {\n    bench: {\n      type: [Number, String],\n      default: 0,\n    },\n    itemHeight: {\n      type: [Number, String],\n      required: true,\n    },\n    items: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<any[]>,\n  },\n\n  data: () => ({\n    first: 0,\n    last: 0,\n    scrollTop: 0,\n  }),\n\n  computed: {\n    __bench (): number {\n      return parseInt(this.bench, 10)\n    },\n    __itemHeight (): number {\n      return parseInt(this.itemHeight, 10)\n    },\n    firstToRender (): number {\n      return Math.max(0, this.first - this.__bench)\n    },\n    lastToRender (): number {\n      return Math.min(this.items.length, this.last + this.__bench)\n    },\n  },\n\n  watch: {\n    height: 'onScroll',\n    itemHeight: 'onScroll',\n  },\n\n  mounted () {\n    this.last = this.getLast(0)\n  },\n\n  methods: {\n    getChildren (): VNode[] {\n      return this.items.slice(\n        this.firstToRender,\n        this.lastToRender,\n      ).map(this.genChild)\n    },\n    genChild (item: any, index: number) {\n      index += this.firstToRender\n\n      const top = convertToUnit(index * this.__itemHeight)\n\n      return this.$createElement('div', {\n        staticClass: 'v-virtual-scroll__item',\n        style: { top },\n        key: index,\n      }, getSlot(this, 'default', { index, item }))\n    },\n    getFirst (): number {\n      return Math.floor(this.scrollTop / this.__itemHeight)\n    },\n    getLast (first: number): number {\n      const height = parseInt(this.height || 0, 10) || this.$el.clientHeight\n\n      return first + Math.ceil(height / this.__itemHeight)\n    },\n    onScroll () {\n      this.scrollTop = this.$el.scrollTop\n      this.first = this.getFirst()\n      this.last = this.getLast(this.first)\n    },\n  },\n\n  render (h): VNode {\n    const content = h('div', {\n      staticClass: 'v-virtual-scroll__container',\n      style: {\n        height: convertToUnit((this.items.length * this.__itemHeight)),\n      },\n    }, this.getChildren())\n\n    return h('div', {\n      staticClass: 'v-virtual-scroll',\n      style: this.measurableStyles,\n      directives: [{\n        name: 'scroll',\n        modifiers: { self: true },\n        value: this.onScroll,\n      }],\n      on: this.$listeners,\n    }, [content])\n  },\n})\n"],"mappings":"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"}